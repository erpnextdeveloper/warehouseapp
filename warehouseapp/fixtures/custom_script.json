[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2017-07-19 15:54:43.263253", 
  "name": "Sales Order-Client", 
  "script": "cur_frm.add_fetch(\"customer\", \"warehouse\", \"warehouse\");\n\nfrappe.ui.form.on(\"Sales Order\",\"validate\", function(){\nfor (var i =0; i < cur_frm.doc.items.length; i++){\ncur_frm.doc.items[i].warehouse = cur_frm.doc.warehouse\n}\ncur_frm.refresh_field('items')\n});\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Delivery Note", 
  "modified": "2019-01-07 19:09:56.964013", 
  "name": "Delivery Note-Client", 
  "script": "frappe.ui.form.on(\"Delivery Note\", \"refresh\", function(frm, cdt, cdn) {\n    // code for calculate total and set on parent field.\n    total_qty = 0;\n    $.each(frm.doc.items || [], function(i, d) {\n    total_qty += flt(d.qty);\n    });\n    frm.set_value(\"total_qty\", total_qty);\n    });\n\n\nfrappe.ui.form.on(\"Delivery Note\", \"packing_slip_no\", function(frm, cdt, cdn) {\n\tif(frm.doc.packing_slip_no){\n\tfrappe.call({\n           method: \"frappe.client.get\",\n            args: {\n                name: frm.doc.packing_slip_no,\n                doctype: \"Packing Slips\"\n            },\n            callback(r) {\n                if (r.message) {\n\t\t\tif(r.message.customer!=frm.doc.customer){\n\t\t\tfrm.doc.packing_slip_no='';\n\t\t\trefresh_field(\"packing_slip_no\");\n\t\t\tfrappe.throw(\"Packing Slip Customer Is Different\")\n\t\t\t}\n\t\t\tif(parseInt(r.message.is_delivery_note)\t==1){\n\t\t\tfrm.doc.packing_slip_no='';\n\t\t\trefresh_field(\"packing_slip_no\");\n\t\t\t\tfrappe.throw(\"Already Scanned\")\n\n\t\t\t}\n                    for (var row in r.message.items) {\n\t\t\tconsole.log(row);\n                        var child = frm.add_child(\"items\");\n                        frappe.model.set_value(child.doctype, child.name, \"item_code\", r.message.items[row].item_code);\n\t\t\t frappe.model.set_value(child.doctype, child.name, \"qty\", r.message.items[row].qty);\n\t\t\tfrappe.model.set_value(child.doctype, child.name, \"warehouse\", r.message.warehouse)\n                        refresh_field(\"items\");\n\t\t\tfrm.doc.packing_slip_no='';\n\t\t\trefresh_field(\"packing_slip_no\");\n      \t\t\t  frappe.call({\n        \t\t\t    \"method\": \"warehouseapp.api.updatePackingSlip\",\n            \t\t\t    \"args\": {\n                                    \"name\":r.message.name\n                                     },\n\t\t\t\t    callback:function(res){\n\t\t\t\t\t}\n                               });\n                    }\n\n                }\n            }\n\n        })\n\t}\n    });\n\nfrappe.ui.form.on(\"Delivery Note\", \"item_barcode\", function(frm, cdt, cdn) {\n\t\t\tvar item = locals[cdt][cdn];\n\t\t\tconsole.log(item);\n\t\t\tif(frm.doc.__islocal) { \n\t\t\t\t\t\tfrm.doc.items=[]\n\t\t\t\t\t\tconsole.log(\"test\");\n\t\t\t\t\t\trefresh_field(\"items\");\n\t\t\t\t\t\tcur_frm.save()\n\t\t\n\t\t\t}\n\t\t\tvar flag=0\n\t\t\tfor(var row in item.items)\n\t\t\t{\n\t\t\t\tconsole.log(frm.doc.items[row].item_code);\n\t\t\t\tif(frm.doc.items[row].item_code==item.item_barcode)\n\t\t\t\t{\n\t\t\tfrm.doc.items[row].qty=parseInt(frm.doc.items[row].qty)+1\n\t\t\t\t\trefresh_field(\"items\");\t\t\n\n\t\t\t\t\tfrm.doc.item_barcode='';\n\t\t\t\t\trefresh_field(\"item_barcode\");\n\t\t\t\t\tcur_frm.save();\n\t\t\t\t\t//frappe.model.set_value(cdt,cdn,\"barcode\",frm.doc.name)\n\t\t\t\t\t//refresh_field(\"barcode\");\n\t\t\t\t\tflag=1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tif(flag==0)\n\t\t\t{\n                        var child = frm.add_child(\"items\");\n\n                        frappe.model.set_value(child.doctype, child.name, \"item_code\",item.item_barcode);\n                        frappe.model.set_value(child.doctype, child.name, \"qty\",1);\n\t\t\trefresh_field(\"items\");\n\n\t\t\tfrm.doc.item_barcode='';\n\t\t\trefresh_field(\"item_barcode\");\n\t\t\tcur_frm.save();\n\n\t\t\t\t\t//frappe.model.set_value(cdt,cdn,\"barcode\",frm.doc.name)\n\t\t\t\t\t//refresh_field(\"barcode\");\n\n\t\t\t}\n});\n\n\n\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Payment Entry", 
  "modified": "2018-08-02 15:14:28.290488", 
  "name": "Payment Entry-Client", 
  "script": "frappe.ui.form.on(\"Payment Entry\", \"party\", function(frm, cdt, cdn) {\n\tif(frm.doc.party_type==\"Customer\")\n\t{\n\t\tfrappe.model.set_value(cdt,cdn,\"customer\",frm.doc.party)\n\t\trefresh_field(\"customer\")\n\t}\n    });\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Packing Slips", 
  "modified": "2019-02-22 11:55:01.680476", 
  "name": "Packing Slips-Client", 
  "script": "frappe.ui.form.on(\"Packing Slips\", \"item_barcode\", function(frm, cdt, cdn) {\n\t\t\tvar item = locals[cdt][cdn];\n\t\t\tconsole.log(item);\n\t\t\tif(frm.doc.__islocal) { \n\t\t\t\t\t\tfrm.doc.items=[]\n\t\t\t\t\t\tconsole.log(\"test\");\n\t\t\t\t\t\trefresh_field(\"items\");\n\t\t\t\t\t\tcur_frm.save()\n\t\t\n\t\t\t}\n\t\t\tvar flag=0\n\t\t\tfor(var row in item.items)\n\t\t\t{\n\t\t\t\tconsole.log(frm.doc.items[row].item_code);\n\t\t\t\tif(frm.doc.items[row].item_code==item.item_barcode)\n\t\t\t\t{\n\t\t\tfrm.doc.items[row].qty=parseInt(frm.doc.items[row].qty)+1\n\t\t\t\t\trefresh_field(\"items\");\t\t\n\n\t\t\t\t\tfrm.doc.item_barcode='';\n\t\t\t\t\trefresh_field(\"item_barcode\");\n\t\t\t\t\tcur_frm.save();\n\t\t\t\t\t//frappe.model.set_value(cdt,cdn,\"barcode\",frm.doc.name)\n\t\t\t\t\t//refresh_field(\"barcode\");\n\t\t\t\t\tflag=1;\n\t\t\t\t\t$('[data-fieldname=\"item_barcode\"]').focus();\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tif(flag==0)\n\t\t\t{\n                        var child = frm.add_child(\"items\");\n\n                        frappe.model.set_value(child.doctype, child.name, \"item_code\",item.item_barcode);\n                        frappe.model.set_value(child.doctype, child.name, \"qty\",1);\n\t\t\trefresh_field(\"items\");\n\n\t\t\tfrm.doc.item_barcode='';\n\t\t\trefresh_field(\"item_barcode\");\n\t\t\tcur_frm.save();\n\t\t$('[data-fieldname=\"item_barcode\"]').focus();\n\n\n\t\t\t\t\t//frappe.model.set_value(cdt,cdn,\"barcode\",frm.doc.name)\n\t\t\t\t\t//refresh_field(\"barcode\");\n\n\t\t\t}\n});\n\n\n\n\nfrappe.ui.form.on(\"Packing Slips\", \"on_submit\", function(frm, cdt, cdn) {\n\t\tconsole.log(frm.doc.name)\n\t             var w = window.open(frappe.urllib.get_full_url(\"/printview?\" +\n                    \"doctype=\" +\"Packing Slips\"+\n                    \"&name=\" +frm.doc.name+\n                    \"&trigger_print=1\" +\n                    \"&format=\"+\"barcode print\"+\n                    \"&no_letterhead=0\" +\n                    (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n\n                if (!w) {\n                    msgprint(__(\"Please enable pop-ups for printing.\"));\n                    return;\n                }\n\t\tw.print();\n\t\t\t\n});\n\nfrappe.ui.form.on(\"Packing Slips\", \"onload\", function(frm, cdt, cdn) {\n\t\t$('[data-fieldname=\"customer\"]').focus();\n\t\n\tfrappe.call({\n\t\t\tmethod:\"warehouseapp.api.getWarehouse\",\n\t\t\tcallback: function (data) {\n\t\t\t\tif(data.message) {\n\t\t\t\t\tconsole.log(data.message[0].name);\n\t\t\t\t\tfrappe.model.set_value(cdt,cdn,\"warehouse\",data.message[0].name)\n\t\t\t\t}\n\t\t\t}\n})\n})\n\n\nfrappe.ui.form.on(\"Packing Slips\", \"customer\", function(frm, cdt, cdn) {\n\t\t\n\tif(!frm.doc.warehouse)\n\t{\n\t\t\n\t\tfrappe.throw(\"Select Warehouse First\")\n\t}\n\telse\n\t{\n\n\t\tconsole.log(\"test1\");\n\n\tfrappe.call({\n\t\tmethod:\"warehouseapp.api.getLastPackageNumber\",\n\t\targs:{'customer':frm.doc.customer,'warehouse':frm.doc.warehouse},\n            callback(r) {\n\t\tconsole.log(r.message)\n\t\t\t\tif(r.message)\n\t\t\t\t{\n        \t\t\t\t    frm.set_value(\"package_no\",r.message);\n\t\t\t\t\t    refresh_filed(\"package_no\");\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\n\t\t\t\n});\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Packing", 
  "modified": "2019-02-19 15:45:14.706682", 
  "name": "Packing-Client", 
  "script": "frappe.provide('frappe.ui.keys.handlers');\nfrappe.ui.form.on(cur_frm.doctype, {\n   onload: function(frm, cdt, cdn) {\n\tvar doc=locals[cdt][cdn]\n    $('[data-fieldname=\"barcode\"]').keypress(function(e) {\n      var key = e.which;\n      e.preventDefault();\n      if (key == 13) // the enter key code\n      {\n\tconsole.log(\"barcode\"+frm.doc.barcode)\n\n       if (!doc.barcode == '') {\n\n\n        frappe.run_serially([\n\t          () => {\n\t\tcur_frm.save();\n},\t\n\n\t          () => {\n\tfrappe.timeout(1);\n\tcur_frm.reload_doc();\n\n           //console.log(doc.brand.charAt(0)+ doc.barcode.substring(2).toLowerCase())\n            frappe.call({\n             method: \"frappe.client.get_value\",\n             args: {\n              'doctype': \"Item Barcode\",\n              'filters': {\n               'barcode':doc.barcode,\n               'brand': doc.brand\n              },\n              'fieldname': [\n               'name'\n              ]\n             },\n             callback: function(data) {\n              if (data.message) {\n\t\tconsole.log(data.message[\"name\"])\n               frappe.call({\n                \"method\": \"frappe.client.set_value\",\n                \"args\": {\n                 \"doctype\": \"Packing\",\n                 \"name\":doc.name,\n                 \"fieldname\": {\n                  \"item_code\": data.message[\"name\"],\n                  \"barcode\":doc.barcode\n                 },\n                }\n               });\n              } else {\n               frappe.throw(\"Item Barcode Not Available\")\n              }\n             }\n            });\n\n            },\n           () => {\n            console.log(\"2\")\n          //  var doc = cur_frm.doc\n            var doctype = 'Packing';\n            if (!doc.print_format) {\n             frappe.throw(\"Please Select Print Format\")\n            }\n\n            if (doc.print_format == \"Small Barcode\") {\n             var pf = '10x100'\n             var w = window.open(frappe.urllib.get_full_url(\"/printview?\" +\n              \"doctype=\" + \"Packing\" +\n              \"&name=\" + doc.name +\n              \"&trigger_print=1\" +\n              \"&format=\" + pf +\n              \"&no_letterhead=0\" +\n              (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n             if (!w) {\n              msgprint(__(\"Please enable pop-ups for printing.\"));\n              return;\n             }\n             w.print();\n            } else if (doc.print_format == \"Item Barcode\") {\n             var pf1 = '100x100'\n             w = window.open(frappe.urllib.get_full_url(\"/printview?\" +\n              \"doctype=\" + \"Packing\" +\n              \"&name=\" + doc.name +\n              \"&trigger_print=1\" +\n              \"&format=\" + pf1 +\n              \"&no_letterhead=0\" +\n              (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n             if (!w) {\n              msgprint(__(\"Please enable pop-ups for printing.\"));\n              return;\n             }\n             w.print();\n            } else if (doc.print_format == \"90x240\") {\n             w = window.open(frappe.urllib.get_full_url(\"/printview?\" +\n              \"doctype=\" + \"Packing\" +\n              \"&name=\" + doc.name +\n              \"&trigger_print=1\" +\n              \"&format=\" + doc.print_format +\n              \"&no_letterhead=0\" +\n              (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n             if (!w) {\n              msgprint(__(\"Please enable pop-ups for printing.\"));\n              return;\n             }\n             w.print();\n            } else {\n             frappe.msgprint(\"Please Set item_code,brand,barcode in Item Barcode master\")\n            }\n\n\n\n           },\n           () => {\n\t\tfrappe.timeout(2);\n\t\tcur_frm.reload_doc();\n\t}\n\n          ])\n\n\n\n        }\n       }\n      })\n    }\n   });\n\n\n  frappe.ui.form.on(cur_frm.doctype, {\n   brand: function(r) {\n    cur_frm.reload_doc();\n    cur_frm.save()\n   },\n   target_warehouse: function(r) {\n    cur_frm.reload_doc();\n    cur_frm.save()\n\n   },\n   print_format: function(r) {\n    cur_frm.reload_doc();\n    cur_frm.save()\n\n   }\n  })", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Box Barcode 100x100", 
  "modified": "2019-02-21 15:10:00.558834", 
  "name": "Box Barcode 100x100-Client", 
  "script": "frappe.provide('frappe.ui.keys.handlers');\nfrappe.ui.form.on(cur_frm.doctype, {\n   barcode_custom: function(frm, cdt, cdn) {\n  \tvar doc1=locals[cdt][cdn];\n\tif(doc1.barcode_custom){\n        frappe.run_serially([\n\t          () => {\n\t\tconsole.log(\"brand\"+doc1.brand)\n\t\tconsole.log(\"barcode\"+cur_frm.doc.barcode_custom)\n\t\tconsole.log(\"name\"+doc1.name)\n            frappe.call({\n             method: \"warehouseapp.api.getItemCodeForIB\",\n             args: {\n          \t'brand':cur_frm.doc.brand,\n\t\t'barcode':doc1.barcode_custom,\n\t\t'name':cur_frm.doc.name\n             },\n             callback: function(data) {\n\t\tif(data.message){\n\n\t    var pf1='100x100B'\n            var w = window.open(frappe.urllib.get_full_url(\"/printview?\" +\n              \"doctype=\" + \"Box Barcode 100x100\" +\n              \"&name=\" + doc1.name +\n              \"&trigger_print=1\" +\n              \"&format=\" + pf1 +\n              \"&no_letterhead=0\" +\n              (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n             if (!w) {\n              msgprint(__(\"Please enable pop-ups for printing.\"));\n              return;\n             }\n\t\tconsole.log(w);\n             w.print();\n\t\t}\n          \n             }\n            });\n\n            },\n           () => {\n\t\tfrappe.timeout(2);\n\t\tcur_frm.reload_doc();\n\t\t$('[data-fieldname=\"barcode\"]').focus();\n\n\n\t}\n\t\n\n          ])\n\t}\n    \n    }\n   });\n\n\n  frappe.ui.form.on(cur_frm.doctype, {\n   brand: function(r) {\n    cur_frm.reload_doc();\n    cur_frm.save()\n   },\n   target_warehouse: function(r) {\n    cur_frm.reload_doc();\n    cur_frm.save()\n\n   }\n  })", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Godrej Barcode 90x240", 
  "modified": "2019-02-22 14:44:06.029442", 
  "name": "Godrej Barcode 90x240-Client", 
  "script": "frappe.provide('frappe.ui.keys.handlers');\nfrappe.ui.form.on(cur_frm.doctype, {\n   barcode_custom: function(frm, cdt, cdn) {\n  \tvar doc1=locals[cdt][cdn];\n\tif(doc1.barcode_custom){\n        frappe.run_serially([\n\t          () => {\n\t\tconsole.log(\"brand\"+doc1.brand)\n\t\tconsole.log(\"barcode\"+cur_frm.doc.barcode_custom)\n\t\tconsole.log(\"name\"+doc1.name)\n            frappe.call({\n             method: \"warehouseapp.api.getItemCodeForGB\",\n             args: {\n          \t'brand':cur_frm.doc.brand,\n\t\t'barcode':doc1.barcode_custom,\n\t\t'name':cur_frm.doc.name\n             },\n             callback: function(data) {\n\t\tif(data.message){\n\n\t    var pf1='90x240 Godrej'\n            var w = window.open(frappe.urllib.get_full_url(\"/printview?\" +\n              \"doctype=\" + \"Godrej Barcode 90x240\" +\n              \"&name=\" + doc1.name +\n              \"&trigger_print=1\" +\n              \"&format=\" + pf1 +\n              \"&no_letterhead=0\" +\n              (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n             if (!w) {\n              msgprint(__(\"Please enable pop-ups for printing.\"));\n              return;\n             }\n\t\tconsole.log(w);\n             w.print();\n\t\t}\n          \n             }\n            });\n\n            },\n           () => {\n\t\tfrappe.timeout(2);\n\t\tcur_frm.reload_doc();\n\t\t$('[data-fieldname=\"barcode\"]').focus();\n\n\n\t}\n\t\n\n          ])\n\t}\n    \n    }\n   });\n\n\n  frappe.ui.form.on(cur_frm.doctype, {\n   brand: function(r) {\n    cur_frm.reload_doc();\n    cur_frm.save()\n   },\n   target_warehouse: function(r) {\n    cur_frm.reload_doc();\n    cur_frm.save()\n\n   }\n  })", 
  "script_type": "Client"
 }
]